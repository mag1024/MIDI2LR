<project>
    <shortName>MIDI2LR</shortName>
    <fullName>MIDI2LR</fullName>
    <version>3.0.0.1</version>
    <installerFilename>${product_shortname}-${product_version}-${debuglabel}${platform_name}-installer.${platform_exec_suffix}</installerFilename>
    <readmeFile>../Source/LRPlugin/ReadMe.txt</readmeFile>
    <licenseFile>../LICENSE.txt</licenseFile>
    <htmlLicenseFile>LICENSE.html</htmlLicenseFile>
    <logoImage>MIDI2LR48.png</logoImage>
    <splashImage>../Source/MIDI2LR.png</splashImage>
    <defaultLanguage>auto</defaultLanguage>
    <allowLanguageSelection>1</allowLanguageSelection>
    <componentList>
        <component>
            <name>default</name>
            <description>Default Component</description>
            <canBeEdited>1</canBeEdited>
            <selected>1</selected>
            <show>1</show>
            <folderList>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}/MIDI2LR.lrplugin</destination>
                    <name>programfiles</name>
                    <platforms>all</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>${lua}/About.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/ActionSeries.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Build.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Client.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/ClientUtilities.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Database.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/DebugInfo.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/FileLoadPref.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/FileSavePref.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Filters.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Info.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Init.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Keys.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Keywords.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/KeywordsDialog.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/KeyShortcuts.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/LaunchServer.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/LICENSE.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Limits.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/LocalPresets.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Options.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/OptionsUtilities.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Preferences.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Presets.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/PresetsDialog.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Profiles.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/ProfileTypes.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/serpent.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/ShutDownPlugin.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/StopServer.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/SystemInfo.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_de.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_en.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_es.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_fr.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_it.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_ja.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_ko.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_nl.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_pt.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_sv.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_zn_cn.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TranslatedStrings_zn_tw.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>../Source/LRPlugin/MIDI2LR.lrplugin/TRANSLATIONS.txt</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Utilities.lua</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>${lua}/Virtual.lua</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}/MIDI2LR.lrplugin</destination>
                    <name>programfileswindows</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>${exe}/MIDI2LR.exe</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>Program Files</description>
                    <destination>${installdir}/MIDI2LR.lrplugin</destination>
                    <name>programfilesosx</name>
                    <platforms>osx</platforms>
                    <distributionFileList>
                        <distributionDirectory>
                            <origin>${app}/MIDI2LR.app</origin>
                        </distributionDirectory>
                        <distributionFile>
                            <origin>../Source/LRPlugin/ReadMe.txt</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>Program Settings</description>
                    <destination>%{env(APPDATA)}/MIDI2LR/</destination>
                    <name>Settings</name>
                    <platforms>windows</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../Source/UserSettings/MenuTrans.xml</origin>
                        </distributionFile>
                    </distributionFileList>
                    <ruleList>
                        <fileExists>
                            <negate>1</negate>
                            <path>%{env(APPDATA)}/MIDI2LR/MenuTrans.xml</path>
                        </fileExists>
                    </ruleList>
                </folder>
                <folder>
                    <description>Program Settings</description>
                    <destination>${user_home_directory}/Library/Application Support/MIDI2LR/</destination>
                    <name>settingsOSX</name>
                    <platforms>osx</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>../Source/UserSettings/MenuTrans.xml</origin>
                        </distributionFile>
                    </distributionFileList>
                    <ruleList>
                        <fileExists>
                            <negate>1</negate>
                            <path>${user_home_directory}/Library/Application Support/MIDI2LR/MenuTrans.xml</path>
                        </fileExists>
                    </ruleList>
                </folder>
            </folderList>
            <startMenuShortcutList>
                <startMenuShortcut>
                    <comment>Uninstall ${project.fullName}</comment>
                    <name>Uninstall ${project.fullName}</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${installdir}/MIDI2LR.lrplugin/uninstallMIDI2LR.exe</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon>${installdir}/MIDI2LR.lrplugin/uninstallMIDI2LR.exe</windowsIcon>
                    <windowsPath></windowsPath>
                </startMenuShortcut>
                <startMenuLinkShortcut>
                    <comment></comment>
                    <name>${project.fullName} instructions</name>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <url>https://github.com/rsjaffe/MIDI2LR/wiki</url>
                    <windowsIcon>Source/MIDI2LR.ico</windowsIcon>
                </startMenuLinkShortcut>
            </startMenuShortcutList>
        </component>
    </componentList>
    <preBuildActionList>
        <if>
            <actionList>
                <setInstallerVariable>
                    <name>lua</name>
                    <value>../Source/LRPlugin/MIDI2LR.lrplugin/compiled</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>exe</name>
                    <value>../Builds/VisualStudio2017/x64/Release/App</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>app</name>
                    <value>../Builds/MacOSX/build/Release</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>debuglabel</name>
                    <value></value>
                </setInstallerVariable>
            </actionList>
            <conditionRuleList>
                <isTrue>
                    <negate>1</negate>
                    <value>${debug}</value>
                </isTrue>
            </conditionRuleList>
            <elseActionList>
                <setInstallerVariable>
                    <name>lua</name>
                    <value>../Source/LRPlugin/MIDI2LR.lrplugin</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>exe</name>
                    <value>../Builds/VisualStudio2017/x64/Debug/App</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>app</name>
                    <value>../Builds/MacOSX/build/Debug</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>debuglabel</name>
                    <value>debug-</value>
                </setInstallerVariable>
            </elseActionList>
        </if>
    </preBuildActionList>
    <initializationActionList>
        <throwError>
            <text>This application runs on MacOS 10.12 or above only. Use MID2OR versions 2.9.3 or earlier if you must use an earlier version of MacOS.</text>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
                <compareVersions>
                    <logic>less</logic>
                    <version1>${osx_major_version}</version1>
                    <version2>10.12</version2>
                </compareVersions>
            </ruleList>
        </throwError>
        <throwError>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <text>This application runs on Windows 7 or above only.</text>
            <ruleList>
                <platformTest>
                    <type>windows-vista</type>
                </platformTest>
                <platformTest>
                    <type>windows-xp</type>
                </platformTest>
            </ruleList>
        </throwError>
    </initializationActionList>
    <preInstallationActionList>
        <setInstallerVariable>
            <name>installdir</name>
            <value>${user_home_directory}/Library/Application Support/Adobe/Lightroom/Modules</value>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>project.installationType</name>
            <value>upgrade</value>
            <ruleList>
                <registryTest>
                    <key>HKEY_LOCAL_MACHINE\SOFTWARE\${project.vendor}\${project.fullName}</key>
                    <logic>exists</logic>
                    <name>Location</name>
                </registryTest>
            </ruleList>
        </setInstallerVariable>
        <registryGet>
            <key>HKEY_LOCAL_MACHINE\SOFTWARE\${project.vendor}\${project.fullName}</key>
            <name>Location</name>
            <variable>installdir</variable>
            <ruleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
                <registryTest>
                    <key>HKEY_LOCAL_MACHINE\SOFTWARE\${project.vendor}\${project.fullName}</key>
                    <logic>exists</logic>
                    <name>Location</name>
                </registryTest>
            </ruleList>
        </registryGet>
    </preInstallationActionList>
    <postInstallationActionList>
        <if>
            <actionList>
                <createDirectory>
                    <path>%{env(APPDATA)}/MIDI2LR/</path>
                </createDirectory>
            </actionList>
            <conditionRuleList>
                <platformTest>
                    <type>windows</type>
                </platformTest>
            </conditionRuleList>
            <elseActionList>
                <createDirectory>
                    <path>${user_home_directory}/Library/Application Support/MIDI2LR/</path>
                </createDirectory>
                <createDirectory>
                    <path>${user_home_directory}/Library/Logs/MIDI2LR/</path>
                </createDirectory>
            </elseActionList>
        </if>
    </postInstallationActionList>
    <preUninstallationActionList>
        <addFilesToUninstaller>
            <files>settings.bin</files>
        </addFilesToUninstaller>
    </preUninstallationActionList>
    <compressPackedFiles>1</compressPackedFiles>
    <compressionAlgorithm>lzma-ultra</compressionAlgorithm>
    <createOsxBundleDmg>1</createOsxBundleDmg>
    <enableRollback>1</enableRollback>
    <enableTimestamp>1</enableTimestamp>
    <height>400</height>
    <licenseFileEncoding>utf-8</licenseFileEncoding>
    <osxApplicationBundleIcon>../Builds/MacOSX/Icon.icns</osxApplicationBundleIcon>
    <osxPlatforms>osx-x86_64</osxPlatforms>
    <osxUninstallerApplicationBundleIcon>../Builds/MacOSX/Icon.icns</osxUninstallerApplicationBundleIcon>
    <outputDirectory>../..</outputDirectory>
    <productDisplayIcon>../Builds/VisualStudio2017/icon.ico</productDisplayIcon>
    <productUrlHelpLink>https://groups.google.com/forum/#!forum/midi2lr</productUrlHelpLink>
    <productUrlInfoAbout>https://rsjaffe.github.io/MIDI2LR/</productUrlInfoAbout>
    <readmeFileEncoding>utf-8</readmeFileEncoding>
    <saveRelativePaths>1</saveRelativePaths>
    <singleInstanceCheck>1</singleInstanceCheck>
    <uninstallerDirectory>${installdir}/MIDI2LR.lrplugin</uninstallerDirectory>
    <uninstallerName>uninstallMIDI2LR</uninstallerName>
    <vendor>MIDI2LR</vendor>
    <width>600</width>
    <windowsExecutableIcon>../Builds/VisualStudio2017/icon.ico</windowsExecutableIcon>
    <windowsUninstallerExecutableIcon>../Builds/VisualStudio2017/icon.ico</windowsUninstallerExecutableIcon>
    <finalPageActionList>
        <launchBrowser>
            <explanation>Opens a web browser showing the manual. Please bookmark the manual as there are many options and settings you can use in this program.</explanation>
            <progressText>View instructions.</progressText>
            <url>https://github.com/rsjaffe/MIDI2LR/wiki</url>
        </launchBrowser>
        <launchBrowser>
            <explanation>Opens a web browser with a PayPal form where can make a donation to support further ${project.fullName} development.</explanation>
            <progressText>Donate to ${project.fullName} development.</progressText>
            <url>https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=YWHT4JMA42RXN</url>
        </launchBrowser>
    </finalPageActionList>
    <parameterList>
        <directoryParameter>
            <name>installdir</name>
            <description>Installer.Parameter.installdir.description</description>
            <explanation>Installer.Parameter.installdir.explanation</explanation>
            <value></value>
            <default>${windows_folder_appdata}/Adobe/Lightroom/Modules</default>
            <allowEmptyValue>0</allowEmptyValue>
            <cliOptionName>prefix</cliOptionName>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
            <width>67</width>
        </directoryParameter>
    </parameterList>
</project>

